--  SPDX-FileCopyrightText: 2025 Max Zakirov <ardo25968@gmail.com>
--
--  SPDX-License-Identifier: MIT
----------------------------------------------------------------

with Geo_Mag.Common;

private package Geo_Mag.Data is
   type Meters is new Float;
   type Kilometers is new Float;

   EGMS96_Columns : Integer :=
     1441; -- 360 degrees of longitude at 15 minute spacing
   EGMS96_Rows    : Integer :=
     721; -- 180 degrees of latitude  at 15 minute spacing
   Scale_Factor   : Integer := 4; -- 15 minute spacing per degree

   type WGS84_Ellipsoid_Parameters is record
      --  Semi-major axis of the ellipsoid
      A                    : Kilometers;
      --  Semi-minor axis of the ellipsoid
      B                    : Kilometers;
      --  Mean radius of ellipsoid
      R                    : Kilometers;
      Flattening           : Float;
      Eccentricity         : Float;
      Eccentricity_Squared : Float;
   end record;

   type Wgs_Coordinates is record
      Lat          : Float := 0.0;
      Lon          : Float := 0.0;
      Height_Geoid : Kilometers :=
        0.0; -- height WGS84 above ellipsoid calculated with EGMS96-15min model
   end record;

   type Geocentric_Coordinates is record
      Lambda : Float := 0.0; -- longitude
      Phig   : Float := 0.0; -- geocentric latitude
      R      : Kilometers := 0.0; -- distance from the center of the ellipsoid
   end record;

   type Nanoteslas is new Float;
   type Nanoteslas_Per_Year is new Float;

   type Gaus_Coefficients is array (Positive range <>) of Nanoteslas;
   type Seculat_Variation_Coefficients is
     array (Positive range <>) of Nanoteslas_Per_Year;

   Model_Max_Index : constant Integer := 90;

   type Magnetic_Model is record
      Max_Index     : Integer;
      Max_Degree    : Integer;
      Base_Year     : Float;
      Gauss_Coeff_G : Gaus_Coefficients (1 .. Model_Max_Index);
      Gauss_Coeff_H : Gaus_Coefficients (1 .. Model_Max_Index);
      Secular_Var_G : Seculat_Variation_Coefficients (1 .. Model_Max_Index);
      Secular_Var_H : Seculat_Variation_Coefficients (1 .. Model_Max_Index);
   end record;

   type Variables_Array is array (Natural range <>) of Float;

   type Spherical_Harmonic_Variables (Length : Natural) is record
      Relative_Radius_Power : Variables_Array (0 .. Length);
      Cos_M_Labmda          : Variables_Array (0 .. Length);
      Sin_M_Labmda          : Variables_Array (0 .. Length);
   end record;

   type Associated_Legendre_Functions (Length : Natural) is record
      Pcup            : Variables_Array (0 .. Length);
      Derivative_Pcup : Variables_Array (0 .. Length);
   end record;

   type Magnetic_Vector is record
      Bx : Float := 0.0;
      By : Float := 0.0;
      Bz : Float := 0.0;
   end record;

   Base_Model : constant Geo_Mag.Data.Magnetic_Model :=
     (Max_Index     => Model_Max_Index,
      Max_Degree    => 12,
      Base_Year     => 2025.0,
      Gauss_Coeff_G =>
        (1  => -29351.8,
         2  => -1410.8,
         3  => -2556.6,
         4  => 2951.1,
         5  => 1649.3,
         6  => 1361.0,
         7  => -2404.1,
         8  => 1243.8,
         9  => 453.6,
         10 => 895.0,
         11 => 799.5,
         12 => 55.7,
         13 => -281.1,
         14 => 12.1,
         15 => -233.2,
         16 => 368.9,
         17 => 187.2,
         18 => -138.7,
         19 => -142.0,
         20 => 20.9,
         21 => 64.4,
         22 => 63.8,
         23 => 76.9,
         24 => -115.7,
         25 => -40.9,
         26 => 14.9,
         27 => -60.7,
         28 => 79.5,
         29 => -77.0,
         30 => -8.8,
         31 => 59.3,
         32 => 15.8,
         33 => 2.5,
         34 => -11.1,
         35 => 14.2,
         36 => 23.2,
         37 => 10.8,
         38 => -17.5,
         39 => 2.0,
         40 => -21.7,
         41 => 16.9,
         42 => 15.0,
         43 => -16.8,
         44 => 0.9,
         45 => 4.6,
         46 => 7.8,
         47 => 3.0,
         48 => -0.2,
         49 => -2.5,
         50 => -13.1,
         51 => 2.4,
         52 => 8.6,
         53 => -8.7,
         54 => -12.9,
         55 => -1.3,
         56 => -6.4,
         57 => 0.2,
         58 => 2.0,
         59 => -1.0,
         60 => -0.6,
         61 => -0.9,
         62 => 1.5,
         63 => 0.9,
         64 => -2.7,
         65 => -3.9,
         66 => 2.9,
         67 => -1.5,
         68 => -2.5,
         69 => 2.4,
         70 => -0.6,
         71 => -0.1,
         72 => -0.6,
         73 => -0.1,
         74 => 1.1,
         75 => -1.0,
         76 => -0.2,
         77 => 2.6,
         78 => -2.0,
         79 => -0.2,
         80 => 0.3,
         81 => 1.2,
         82 => -1.3,
         83 => 0.6,
         84 => 0.6,
         85 => 0.5,
         86 => -0.1,
         87 => -0.4,
         88 => -0.2,
         89 => -1.3,
         90 => -0.7),
      Gauss_Coeff_H =>
        (1  => -0.0,
         2  => 4545.4,
         3  => 0.0,
         4  => -3133.6,
         5  => -815.1,
         6  => 0.0,
         7  => -56.6,
         8  => 237.5,
         9  => -549.5,
         10 => 0.0,
         11 => 278.6,
         12 => -133.9,
         13 => 212.0,
         14 => -375.6,
         15 => 0.0,
         16 => 45.4,
         17 => 220.2,
         18 => -122.9,
         19 => 43.0,
         20 => 106.1,
         21 => 0.0,
         22 => -18.4,
         23 => 16.8,
         24 => 48.8,
         25 => -59.8,
         26 => 10.9,
         27 => 72.7,
         28 => 0.0,
         29 => -48.9,
         30 => -14.4,
         31 => -1.0,
         32 => 23.4,
         33 => -7.4,
         34 => -25.1,
         35 => -2.3,
         36 => 0.0,
         37 => 7.1,
         38 => -12.6,
         39 => 11.4,
         40 => -9.7,
         41 => 12.7,
         42 => 0.7,
         43 => -5.2,
         44 => 3.9,
         45 => 0.0,
         46 => -24.8,
         47 => 12.2,
         48 => 8.3,
         49 => -3.3,
         50 => -5.2,
         51 => 7.2,
         52 => -0.6,
         53 => 0.8,
         54 => 10.0,
         55 => 0.0,
         56 => 3.3,
         57 => 0.0,
         58 => 2.4,
         59 => 5.3,
         60 => -9.1,
         61 => 0.4,
         62 => -4.2,
         63 => -3.8,
         64 => 0.9,
         65 => -9.1,
         66 => 0.0,
         67 => 0.0,
         68 => 2.9,
         69 => -0.6,
         70 => 0.2,
         71 => 0.5,
         72 => -0.3,
         73 => -1.2,
         74 => -1.7,
         75 => -2.9,
         76 => -1.8,
         77 => -2.3,
         78 => 0.0,
         79 => -1.3,
         80 => 0.7,
         81 => 1.0,
         82 => -1.4,
         83 => -0.0,
         84 => 0.6,
         85 => -0.1,
         86 => 0.8,
         87 => 0.1,
         88 => -1.0,
         89 => 0.1,
         90 => 0.2),
      Secular_Var_G =>
        (1  => 12.0,
         2  => 19.7,
         3  => -11.6,
         4  => -5.2,
         5  => -8.0,
         6  => -1.3,
         7  => -4.2,
         8  => 0.4,
         9  => -15.6,
         10 => -1.6,
         11 => -2.4,
         12 => -6.0,
         13 => 5.6,
         14 => -7.0,
         15 => 0.6,
         16 => 1.4,
         17 => 0.0,
         18 => 0.6,
         19 => 2.2,
         20 => 0.9,
         21 => -0.2,
         22 => -0.4,
         23 => 0.9,
         24 => 1.2,
         25 => -0.9,
         26 => 0.3,
         27 => 0.9,
         28 => -0.0,
         29 => -0.1,
         30 => -0.1,
         31 => 0.5,
         32 => -0.1,
         33 => -0.8,
         34 => -0.8,
         35 => 0.8,
         36 => -0.1,
         37 => 0.2,
         38 => 0.0,
         39 => 0.5,
         40 => -0.1,
         41 => 0.3,
         42 => 0.2,
         43 => -0.0,
         44 => 0.2,
         45 => -0.0,
         46 => -0.1,
         47 => 0.1,
         48 => 0.3,
         49 => -0.3,
         50 => 0.0,
         51 => 0.3,
         52 => -0.1,
         53 => 0.1,
         54 => -0.1,
         55 => 0.1,
         56 => 0.0,
         57 => 0.1,
         58 => 0.1,
         59 => -0.0,
         60 => -0.3,
         61 => 0.0,
         62 => -0.1,
         63 => -0.1,
         64 => -0.0,
         65 => -0.0,
         66 => 0.0,
         67 => -0.0,
         68 => 0.0,
         69 => 0.0,
         70 => -0.1,
         71 => 0.0,
         72 => -0.0,
         73 => -0.1,
         74 => -0.1,
         75 => -0.1,
         76 => -0.1,
         77 => 0.0,
         78 => 0.0,
         79 => -0.0,
         80 => -0.0,
         81 => -0.0,
         82 => -0.0,
         83 => 0.1,
         84 => -0.0,
         85 => 0.0,
         86 => 0.0,
         87 => 0.0,
         88 => -0.1,
         89 => -0.0,
         90 => -0.1),
      Secular_Var_H =>
        (1  => 0.0,
         2  => -21.5,
         3  => 0.0,
         4  => -27.7,
         5  => -12.1,
         6  => 0.0,
         7  => 4.0,
         8  => -0.3,
         9  => -4.1,
         10 => 0.0,
         11 => -1.1,
         12 => 4.1,
         13 => 1.6,
         14 => -4.4,
         15 => 0.0,
         16 => -0.5,
         17 => 2.2,
         18 => 0.4,
         19 => 1.7,
         20 => 1.9,
         21 => 0.0,
         22 => 0.3,
         23 => -1.6,
         24 => -0.4,
         25 => 0.9,
         26 => 0.7,
         27 => 0.9,
         28 => 0.0,
         29 => 0.6,
         30 => 0.5,
         31 => -0.8,
         32 => 0.0,
         33 => -1.0,
         34 => 0.6,
         35 => -0.2,
         36 => 0.0,
         37 => -0.2,
         38 => 0.5,
         39 => -0.4,
         40 => 0.4,
         41 => -0.5,
         42 => -0.6,
         43 => 0.3,
         44 => 0.2,
         45 => 0.0,
         46 => -0.3,
         47 => 0.3,
         48 => -0.3,
         49 => 0.3,
         50 => 0.2,
         51 => -0.1,
         52 => -0.2,
         53 => 0.4,
         54 => 0.1,
         55 => 0.0,
         56 => 0.0,
         57 => -0.0,
         58 => -0.2,
         59 => 0.1,
         60 => -0.1,
         61 => 0.1,
         62 => 0.0,
         63 => -0.1,
         64 => 0.2,
         65 => -0.0,
         66 => 0.0,
         67 => -0.0,
         68 => 0.1,
         69 => -0.0,
         70 => 0.1,
         71 => -0.0,
         72 => -0.0,
         73 => 0.1,
         74 => -0.0,
         75 => 0.0,
         76 => 0.0,
         77 => 0.0,
         78 => 0.0,
         79 => -0.0,
         80 => 0.0,
         81 => -0.1,
         82 => 0.1,
         83 => -0.0,
         84 => -0.0,
         85 => -0.0,
         86 => 0.0,
         87 => -0.0,
         88 => -0.0,
         89 => 0.0,
         90 => -0.1));
end Geo_Mag.Data;
